```python
# ëª¨ë“  ë°°ì—´, í•œëª…ëº€ ë°°ì—´ì„ ë°›ê³  ê·¸ í•œëª…ì„ ì°¾ì•„ë¼
# ê°™ì€ì´ë¦„ì´ë”ë¼ë„, ê°ê° ê¸°ë¡í•œë‹¤.

#ë¨¼ì € 10ì˜ 6ìŠ¹ì˜ ì…ë ¥ì´ë¯€ë¡œ, NlogNì´í•˜ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.(ì •ë ¬ê°€ëŠ¥)
#ì—†ë‹¤ëŠ” ê±¸ ì•Œë ¤ë©´, ê²°êµ­ ì™„ì£¼ìëª…ë‹¨ê³¼ ì „ì²´ëª…ë‹¨ì„ ë¹„êµí•´ì•¼í•œë‹¤.
#sortë¡œ ì •ë ¬í•œë‹¤ë©´, ë¬´ì¡°ê±´ nlognì´ë‹¤ ì¢€ë” ì¤„ì¼ìˆœ ì—†ì„ê¹Œ?

#ì „ì²´ëª…ë‹¨ì„ í…Œì´ë¸”ì— ë„£ê³  ì™„ì£¼ì ëª…ë‹¨ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤ë©´
    #ì‚­ì œì—°ì‚°ìœ¼ë¡œ ë¹„êµë¥¼ ì§„í–‰í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ë‚¨ì€ê±¸ ë°˜í™˜
#ì™„ì£¼ìëª…ë‹¨ì„ í…Œì´ë¸”ì— ë„£ê³  ì „ì²´ëª…ë‹¨ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤ë©´
    #ë™ì¼ì¸ì´ ìˆëŠ”ê²½ìš°ì—ë§Œ ì‚­ì œì—°ì‚°ì„ ì§„í–‰í•œë‹¤
    # í…Œì´ë¸”ì— ì´ë¦„ì´ ì—†ë‹¤ë©´ ë°˜í™˜,
#ì „ì²´ ëª…ë‹¨ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ”ê²Œ ëê¹Œì§€ ê³„ì‚° ì•ˆí•  ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•œë‹¤.

def solution(participant, completion):
    dictcompletion={}
    answer = ''
#1.ë°›ì€ ì™„ì£¼ìë°°ì—´ì„ í‚¤ëŠ” ì´ë¦„, ê°’ì€ ì¸ì›ìœ¼ë¡œ í…Œì´ë¸”ì— ì €ì¥í•œë‹¤
    for name in completion:
        if name in dictcompletion:
            dictcompletion[name]+=1
        else: dictcompletion[name]=1
#2.ì „ì²´ëª…ë‹¨ì„ ìˆœíšŒí•˜ì—¬, ì™„ì£¼ìí…Œì´ë¸”ê³¼ ë¹„êµí•œë‹¤.
    for i, name in enumerate(participant): 
    #ë§Œì¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë°˜í™˜í•´ ì¢…ë£Œ
        if name not in dictcompletion:
            answer = name
            break 
    #ë§Œì•½ ì¼ì¹˜í•œë‹¤ë©´ 1ì¼ë• ì‚­ì œ, 2ì´ìƒì¼ë• ê°ì†Œ
        elif 1<dictcompletion[name]:
            dictcompletion[name]-=1
        else: dictcompletion.pop(name)
    return answer
```

í•´ì‹œ(Hash) ì•Œê³ ë¦¬ì¦˜ì˜ í•µì‹¬ì¸ 'ê²€ìƒ‰ ì†ë„ ìµœì í™”'ì— ì§‘ì¤‘í•˜ì—¬ ë¬¸ì œë¥¼ ì˜ í‘¸ì…¨ë„¤ìš”. íŒŒì´ì¬ì˜ ë”•ì…”ë„ˆë¦¬ë¥¼ í™œìš©í•´ $O(N)$ ì‹œê°„ ë³µì¡ë„ë¡œ í•´ê²°í•œ ì ‘ê·¼ ë°©ì‹ì€ ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, **"ë³€ìˆ˜ ì‘ëª…"**ê³¼ **"ìë£Œêµ¬ì¡° í™œìš©ì˜ ì„¸ë ¨ë¯¸"** ì¸¡ë©´ì—ì„œ ëª‡ ê°€ì§€ ë‹¤ë“¬ì„ ì ì´ ë³´ì…ë‹ˆë‹¤. 10ë…„ ì°¨ ì‚¬ìˆ˜ì˜ ì‹œì„ ìœ¼ë¡œ ê¼¼ê¼¼í•˜ê²Œ ë¦¬ë·°í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

### [1ë‹¨ê³„ ë‹µë³€] : ì œì¶œëœ ì½”ë“œ ë¶„ì„ ë° CS ê²€ì¦

#### **1. âš”ï¸ ì½”ë”© í…ŒìŠ¤íŠ¸ ê´€ì  ë¹„íŒ**

- **ì‹œê°„ ë³µì¡ë„:** ì„±ê³µ. ì…ë ¥ê°’ $N$ì´ ìµœëŒ€ 10ë§Œì¼ ë•Œ, `participant`ì™€ `completion`ì„ ê°ê° í•œ ë²ˆì”© ìˆœíšŒí•˜ë¯€ë¡œ $O(N)$ì…ë‹ˆë‹¤. ì œí•œ ì‹œê°„ ë‚´ì— ì¶©ë¶„íˆ í†µê³¼í•©ë‹ˆë‹¤.
- **ê³µê°„ ë³µì¡ë„:** ì„±ê³µ. `completion` ë°°ì—´ í¬ê¸°ë§Œí¼ì˜ í•´ì‹œ í…Œì´ë¸”(`dictcompletion`) ê³µê°„ì´ í•„ìš”í•˜ë¯€ë¡œ $O(N)$ì…ë‹ˆë‹¤.
- **ë¡œì§ ì •í™•ì„±:** ë™ëª…ì´ì¸ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **Count(ê°œìˆ˜)**ë¥¼ ì €ì¥í•œ ë°©ì‹ì€ ì •í™•í•©ë‹ˆë‹¤. ë‹¨ìˆœíˆ ì¡´ì¬ ì—¬ë¶€(Boolean)ë§Œ ì²´í¬í–ˆë‹¤ë©´ í‹€ë ¸ì„ ê²ë‹ˆë‹¤.
    

#### **2. ğŸ’© ì‹¤ë¬´ ì½”ë“œ ê´€ì  ë¦¬ë·° (Clean Code)**

ì´ ì½”ë“œë¥¼ PR(Pull Request)ë¡œ ì˜¬ë ¸ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ í”¼ë“œë°±ì„ ë°›ì•˜ì„ ê²ë‹ˆë‹¤.

- **í—ê°€ë¦¬ì•ˆ í‘œê¸°ë²• ì§€ì–‘ (`dictcompletion`):**
    - ë³€ìˆ˜ëª…ì— ìë£Œí˜•(`dict`)ì„ ì ëŠ” ê±´ ì˜›ë‚  ë°©ì‹ì…ë‹ˆë‹¤. ë‚˜ì¤‘ì— ìë£Œêµ¬ì¡°ê°€ ë°”ë€Œë©´ ë³€ìˆ˜ëª…ë„ ë°”ê¿”ì•¼ í•˜ë‹ˆê¹Œìš”.
    - **ìˆ˜ì • ì œì•ˆ:** `completionCounts` í˜¹ì€ `finisherMap`ì²˜ëŸ¼ **ë°ì´í„°ì˜ ì˜ë¯¸**ë¥¼ ë‹´ìœ¼ì„¸ìš”.
- **ë¶ˆí•„ìš”í•œ ì¸ë±ìŠ¤ ìƒì„± (`enumerate`):**
    - `for i, name in enumerate(participant):`ì—ì„œ `i`ëŠ” ì „í˜€ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - **ìˆ˜ì • ì œì•ˆ:** ê·¸ëƒ¥ `for name in participant:`ë¡œ ì‘ì„±í•˜ê±°ë‚˜, êµ³ì´ ì¸ë±ìŠ¤ê°€ í•„ìš” ì—†ë‹¤ë©´ `enumerate`ë¥¼ ì œê±°í•˜ì„¸ìš”. íŒŒì´ì¬ìŠ¤ëŸ¬ìš´(Pythonic) ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤.
- **ì¡°ê±´ë¬¸ì˜ ê°€ë…ì„±:**
    - `elif 1 < dictcompletion[name]:` ì¡°ê±´ì€ ë¡œì§ìƒ ë§ì§€ë§Œ, "ê°’ì´ ë‚¨ì•„ìˆìœ¼ë©´ ì°¨ê°í•œë‹¤"ëŠ” ì˜ë¯¸ê°€ í•œëˆˆì— ë“¤ì–´ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¡œì§ì„ ë‹¨ìˆœí™”í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
        

#### **3. ğŸ§  CS ê¸°ë³¸ê¸° ê²€ì¦ (Why & Principle)**

ë©´ì ‘ê´€ì´ ì´ ì½”ë“œë¥¼ ë³´ê³  ì¶”ê°€ë¡œ ë˜ì§ˆ ìˆ˜ ìˆëŠ” ì§ˆë¬¸ì…ë‹ˆë‹¤.

> **Q1. í•´ì‹œ í…Œì´ë¸”(Hash Table)ì—ì„œ 'í•´ì‹œ ì¶©ëŒ(Hash Collision)'ì´ ë°œìƒí•˜ë©´ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ë‚˜ìš”?**
>
> **A:** í•´ì‹œ ì¶©ëŒì´ ë°œìƒí•˜ë©´ ëŒ€í‘œì ìœ¼ë¡œ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•©ë‹ˆë‹¤.
>
> 1. **Chaining (ì²´ì´ë‹):** ê°™ì€ í•´ì‹œ ë²„í‚·ì— ì—°ê²° ë¦¬ìŠ¤íŠ¸(Linked List)ë¡œ ë°ì´í„°ë¥¼ ì¤„ì¤„ì´ ì—°ê²°í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. (Java, Python ë“±ì´ ì£¼ë¡œ ì‚¬ìš©)
>     
> 2. **Open Addressing (ê°œë°© ì£¼ì†Œë²•):** ë¹„ì–´ ìˆëŠ” ë‹¤ë¥¸ ë²„í‚·ì„ ì°¾ì•„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
>     

> **Q2. `participant`ì˜ í¬ê¸°ê°€ ë§¤ìš° ì»¤ì„œ í•´ì‹œ í…Œì´ë¸”ì˜ ì¡°íšŒ ì„±ëŠ¥ì´ $O(N)$ìœ¼ë¡œ ë–¨ì–´ì§€ëŠ” 'ìµœì•…ì˜ ê²½ìš°'ëŠ” ì–¸ì œì¸ê°€ìš”?**
>
> **A:** ëª¨ë“  í‚¤(ì„ ìˆ˜ ì´ë¦„)ê°€ **ë™ì¼í•œ í•´ì‹œ ê°’**ì„ ê°€ì ¸ì„œ, í•˜ë‚˜ì˜ ë²„í‚·ì— ëª¨ë“  ë°ì´í„°ê°€ ëª°ë¦¬ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. ì´ë•ŒëŠ” í•´ì‹œ í…Œì´ë¸”ì´ ì‚¬ì‹¤ìƒ ì—°ê²° ë¦¬ìŠ¤íŠ¸ì²˜ëŸ¼ ë™ì‘í•˜ê²Œ ë˜ì–´ ê²€ìƒ‰ ì†ë„ê°€ $O(1)$ì—ì„œ $O(N)$ìœ¼ë¡œ ëŠë ¤ì§‘ë‹ˆë‹¤.

#### **4. ğŸ’ ì½”ë”© í…ŒìŠ¤íŠ¸ìš© ëª¨ë²” ë‹µì•ˆ (Modern Java)**

ìë°”ì—ì„œëŠ” `HashMap`ì„ ì‚¬ìš©í•˜ë©°, `getOrDefault` ë©”ì„œë“œê°€ í•µì‹¬ì…ë‹ˆë‹¤.

```Java
import java.util.HashMap;
import java.util.Map;

class Solution {
    public String solution(String[] participant, String[] completion) {
        String answer = "";
        // 1. HashMap ì‚¬ìš©: Key(ì´ë¦„) -> Value(ì¹´ìš´íŠ¸)
        // Pythonì˜ ë”•ì…”ë„ˆë¦¬ì™€ ê°™ì€ ì—­í• ì…ë‹ˆë‹¤.
        Map<String, Integer> completionMap = new HashMap<>();

        // 2. ì™„ì£¼ì ëª…ë‹¨ í•´ì‹± (getOrDefaultë¡œ Null ì²˜ë¦¬ ê°„ì†Œí™”)
        // Python: dictcompletion.get(name, 0) + 1 ê³¼ ë™ì¼
        for (String player : participant) {
            completionMap.put(player, completionMap.getOrDefault(player, 0) + 1);
        }

        // 3. ì™„ì£¼ì ì²˜ë¦¬ (ì¹´ìš´íŠ¸ ì°¨ê°)
        for (String player : completion) {
            completionMap.put(player, completionMap.get(player) - 1);
        }

        // 4. ê°’ì´ 0ì´ ì•„ë‹Œ ì‚¬ëŒ(ì™„ì£¼í•˜ì§€ ëª»í•œ 1ëª…) ì°¾ê¸°
        // EntrySetì„ ìˆœíšŒí•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.
        for (Map.Entry<String, Integer> entry : completionMap.entrySet()) {
            if (entry.getValue() > 0) { // ì™„ì£¼ì ëª…ë‹¨ì— ì—†ê±°ë‚˜ ë¶€ì¡±í•œ ê²½ìš°
                answer = entry.getKey();
                break;
            }
        }
        return answer;
    }
}
```

- í–¥ìƒëœ forë¬¸: ë°°ì—´ì—ì„œ ë¬¸ìì—´ì„ í•˜ë‚˜ì”© êº¼ë‚´ì–´ playerë¼ëŠ” ë³€ìˆ˜ì— ë‹´ê³  ë°˜ë³µë¬¸ì„ ì‹¤í–‰í•˜ë¼
	- íŒŒì´ì¬ `for player in participant:`ì™€ ë™ì¼í•œê¸°ëŠ¥
- **`getOrDefault(player, 0)`**: Mapì— ì´ë¦„ì´ ì´ë¯¸ ìˆìœ¼ë©´ ê·¸ ê°’ì„ ê°€ì ¸ì˜¤ê³ , ì—†ìœ¼ë©´ `0`ì„ ê°€ì ¸ì˜¤ë¼ëŠ” ì•„ì£¼ ìœ ìš©í•œ í•¨ìˆ˜ì…ë‹ˆë‹¤.
---
### [2ë‹¨ê³„ ë‹µë³€] : ğŸš¨ ì‹ ì… ì‚¬ì› ì—…ë¬´ ì‹œë®¬ë ˆì´ì…˜ (Junior Reality)

**"ì, ì‹ ì… ì‚¬ì›ë‹˜! ì½”í…Œì—ì„  ë”•ì…”ë„ˆë¦¬ê°€ ì •ë‹µì´ì—ˆì§€ë§Œ, ì‹¤ë¬´ ì„œë²„ ì•„í‚¤í…ì²˜ì—ì„œ ì´ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì“°ë©´ **'ë™ì‹œì„± ì´ìŠˆ(Concurrency Issue)'**ë¡œ ë°ì´í„°ê°€ ê¼¬ì´ê²Œ ë©ë‹ˆë‹¤. ì¸í”„ë¼ì—ê²Œ ì´ ì§ì„ ëœì–´ì¤ì‹œë‹¤."**

---

#### **1. ğŸ¢ ì—…ë¬´ ë°°ê²½ íŒŒì•… (Context)**

ì‹ ì… ì‚¬ì›ë‹˜ì´ ë§¡ì€ ì—…ë¬´ëŠ” ë§ˆë¼í†¤ ì™„ì£¼ í™•ì¸ì´ ì•„ë‹ˆë¼, **"ëŒ€ê·œëª¨ ì»¨í¼ëŸ°ìŠ¤ ì‹¤ì‹œê°„ ì…ì¥ í™•ì¸ ì‹œìŠ¤í…œ"** ê°œë°œì…ë‹ˆë‹¤.

- **ìƒí™©:** 10ë§Œ ëª…ì˜ ì‚¬ì „ ë“±ë¡ì(Participant)ê°€ í–‰ì‚¬ì¥ ê²Œì´íŠ¸ë¥¼ í†µê³¼(Completion)í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- **ìš”êµ¬ì‚¬í•­:** "í˜„ì¬ í–‰ì‚¬ì¥ì— ë„ì°©í•˜ì§€ ì•Šì€ ì‚¬ëŒ(No-Show)"ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì— ë„ì›Œì•¼ í•©ë‹ˆë‹¤.
- **ë¬¸ì œì :** ì„œë²„ëŠ” 1ëŒ€ê°€ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ëŒ€(Scale-out)ë¡œ ë¶„ì‚°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì‹ ì… ì‚¬ì›ë‹˜ì´ ì§  íŒŒì´ì¬ ì½”ë“œ(`dictcompletion`)ëŠ” **ì„œë²„ ë©”ëª¨ë¦¬(RAM)**ì—ë§Œ ì¡´ì¬í•˜ë¯€ë¡œ, ì„œë²„ Aë¡œ ì…ì¥í•œ ì‚¬ëŒì„ ì„œë²„ BëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    

#### **2. ğŸ’¡ ì‚¬ìˆ˜ì˜ ê·“ì†ë§ (Engineer's Mindset: Offloading)**

- **ì•Œê³ ë¦¬ì¦˜ vs ì¸í”„ë¼:**
    - "ì§€ê¸ˆ ì‘ì„±í•˜ì‹  `dictcompletion` ë”•ì…”ë„ˆë¦¬ëŠ” **Local In-Memory** ë°©ì‹ì…ë‹ˆë‹¤. ì„œë²„ê°€ ì¬ë¶€íŒ…ë˜ë©´ ë°ì´í„°ê°€ ë‹¤ ë‚ ì•„ê°€ê³ , ì„œë²„ ê°„ ë°ì´í„° ê³µìœ ë„ ì•ˆ ë©ë‹ˆë‹¤."
    - "ì´ ë¡œì§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ `for`ë¬¸ì„ ëŒë¦´ ê²Œ ì•„ë‹ˆë¼, **`Redis(In-Memory DB)`**ì—ê²Œ ìœ„ì„í•´ì•¼ í•©ë‹ˆë‹¤."
- **íŒë‹¨ì˜ ê¸°ì¤€:**
    - **ì •í•©ì„±(Consistency):** ì—¬ëŸ¬ ê²Œì´íŠ¸ì—ì„œ ë™ì‹œì— ì…ì¥ ì²˜ë¦¬ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤. RedisëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì´ë¼ **Race Condition(ê²½ìŸ ìƒíƒœ)** ì—†ì´ ì¹´ìš´íŒ…/ì§‘í•© ì—°ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    - **ì†ë„(Latency):** ë””ìŠ¤í¬ ê¸°ë°˜ì¸ RDBMS(MySQL)ë¡œ ì‹¤ì‹œê°„ ì°¨ì§‘í•© ì—°ì‚°ì„ í•˜ë©´ ëŠë¦½ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ê¸°ë°˜ì¸ Redisê°€ ì í•©í•©ë‹ˆë‹¤.
    - **ì‹ë³„ì ë³€ê²½:** ì‹¤ë¬´ì—ì„  'ë™ëª…ì´ì¸'ì„ ì´ë¦„ìœ¼ë¡œ êµ¬ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. **`userId` (Unique Key)**ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë¡œì§ì´ í›¨ì”¬ ì‹¬í”Œí•´ì§‘ë‹ˆë‹¤.
        

#### **3. ğŸ› ï¸ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • (Architecture Decision)**

ì´ ë¬¸ì œëŠ” **`[Caching Layer (Redis)ì˜ Set ìë£Œêµ¬ì¡°]`**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì •ì„ì…ë‹ˆë‹¤.

ì‹ ì… ì‚¬ì›ë‹˜ì´ íŒŒì´ì¬ìœ¼ë¡œ ì§  `O(N)` ë¹„êµ ë¡œì§ì€ Redisì˜ **ì§‘í•© ì—°ì‚°(Set Operation)** ëª…ë ¹ì–´ í•˜ë‚˜ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. ë³µì¡í•œ ì½”ë“œê°€ ì‚¬ë¼ì§€ëŠ” ë§ˆë²•ì„ ë³´ì‹œì£ .

**[AS-IS] ì‹ ì… ì‚¬ì›ë‹˜ì˜ ì½”ë“œ (Python Application Logic)**

```Python
# ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš© -> ì„œë²„ í™•ì¥ ì‹œ ë°ì´í„° ë¶ˆì¼ì¹˜ ë°œìƒ
def solution(participant, completion):
    # â€¦ ë”•ì…”ë„ˆë¦¬ ë§Œë“¤ê³ , forë¬¸ ëŒë¦¬ê³ , ë¹¼ê³  â€¦
    # ì½”ë“œê°€ ê¸¸ê³  ë³µì¡í•¨
    return answer
```

**[TO-BE] Redis ì¸í”„ë¼ ìœ„ì„ (Spring Boot/Java Pseudo Code)**

```Java
// RedisTemplateì„ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •
public Set<String> getNoShowUsers(String eventId) {
    String allUsersKey = "event:" + eventId + ":registered"; // ì°¸ê°€ì ì „ì²´ (Set)
    String enteredUsersKey = "event:" + eventId + ":entered"; // ì…ì¥í•œ ì‚¬ëŒ (Set)

    // í•µì‹¬ ë¡œì§: ë‚´ ì½”ë“œì˜ ë³µì¡í•œ forë¬¸/ifë¬¸ì´ ì´ í•œ ì¤„ë¡œ ëë‚©ë‹ˆë‹¤.
    // SDIFF: ì²« ë²ˆì§¸ Setì—ëŠ” ìˆê³ , ë‘ ë²ˆì§¸ Setì—ëŠ” ì—†ëŠ” ë©¤ë²„ë¥¼ ë°˜í™˜ (ì°¨ì§‘í•©)
    return redisTemplate.opsForSet().difference(allUsersKey, enteredUsersKey);
}
```

- **Redis ëª…ë ¹ì–´ ë§¤í•‘:**
    - ì°¸ê°€ì ë“±ë¡: `SADD event:100:registered "user_uuid_1"`
    - ì…ì¥ ì²˜ë¦¬: `SADD event:100:entered "user_uuid_1"`
    - **ë¯¸ì™„ì£¼ì ì¡°íšŒ:** `SDIFF event:100:registered event:100:entered`
#### **4. ğŸ§ª ì´˜ì´˜í•œ ì˜ˆì™¸ ì²˜ë¦¬ (Edge Case)**

ì¸í”„ë¼ë¥¼ ë„ì…í–ˆì„ ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ë¬¸ì œë“¤ì…ë‹ˆë‹¤.

1. **ëŒ€ìš©ëŸ‰ í‚¤ ì²˜ë¦¬ (Block Issue):**
    
    - ë“±ë¡ìê°€ 10ë§Œ ëª…ì´ ì•„ë‹ˆë¼ **1,000ë§Œ ëª…**ì´ë¼ë©´? `SDIFF` ëª…ë ¹ì–´ëŠ” ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ Redisì˜ ë‹¤ë¥¸ ì‘ì—…ì„ ëª¨ë‘ ë©ˆì¶¥ë‹ˆë‹¤(Block).
    - **í•´ê²°:** ì‹¤ë¬´ì—ì„  `SDIFF`ë¥¼ ë°”ë¡œ ë•Œë¦¬ì§€ ì•Šê³ , `SSCAN`ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìª¼ê°œì„œ ê°€ì ¸ì˜¤ê±°ë‚˜ ë³„ë„ ë°°ì¹˜(Batch) ì„œë²„ì—ì„œ ë¹„ë™ê¸°ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
        
2. **ë°ì´í„° ë§Œë£Œ (TTL):**
    
    - í–‰ì‚¬ê°€ ëë‚¬ëŠ”ë° Redis ë©”ëª¨ë¦¬ë¥¼ ê³„ì† ì°¨ì§€í•˜ë©´ ëˆ ë‚­ë¹„ì…ë‹ˆë‹¤.
    - **í•´ê²°:** í‚¤ë¥¼ ìƒì„±í•  ë•Œ `EXPIRE event:100:registered 86400` (24ì‹œê°„ í›„ ì‚­ì œ)ì„ ë°˜ë“œì‹œ ì„¤ì •í•©ë‹ˆë‹¤.
        
3. **ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨:**
    
    - Redisê°€ ìˆœê°„ì ìœ¼ë¡œ ì—°ê²°ì´ ëŠê¸°ë©´?
    - **í•´ê²°:** DB(MySQL)ì— ì›ë³¸ ë°ì´í„°ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. RedisëŠ” 'ìºì‹œ' ìš©ë„ì´ê³ , ì‹¤ì œ ì…ì¥ ë¡œê·¸ëŠ” DBì—ë„ ë¹„ë™ê¸°ë¡œ ì €ì¥í•˜ì—¬ ë°ì´í„° ìœ ì‹¤ì„ ë°©ì§€í•©ë‹ˆë‹¤. (Write-Behind ì „ëµ)
    

#### **5. ğŸ“ í‡´ê·¼ ì „ 'Todo ë¦¬ìŠ¤íŠ¸' (Dev Process)**

ì, ì´ì œ íšŒì˜ì‹¤ì—ì„œ ë‚˜ê°€ ìë¦¬ë¡œ ëŒì•„ê°€ì„œ ì´ ìˆœì„œëŒ€ë¡œ ì‘ì—…í•˜ì„¸ìš”.

1. **ìš”êµ¬ì‚¬í•­/ì„¤ê³„:**
    
    - "ë™ëª…ì´ì¸ ì²˜ë¦¬ëŠ” `UserId`ë¡œ ëŒ€ì²´í•œë‹¤"ëŠ” ì •ì±… í™•ì •.
    - Redis Key ì„¤ê³„ (`event:{id}:registered`, `event:{id}:entered`) ë¬¸ì„œí™”.
        
2. **API/DTO:**
    
    - `POST /api/events/{id}/enter` (ì…ì¥ ì²˜ë¦¬ API)
    - `GET /api/events/{id}/no-show` (ë¯¸ì…ì¥ì ì¡°íšŒ API) Controller ìŠ¤í… ì½”ë“œ ì‘ì„±.
        
3. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§:**
    
    - Redis `SADD`ë¡œ ì…ì¥ ì²˜ë¦¬ êµ¬í˜„.
    - Redis `SDIFF`ë¡œ ë¯¸ì…ì¥ì ì¡°íšŒ ë¡œì§ êµ¬í˜„ (ê¸°ì¡´ `HashMap` ë¡œì§ ì œê±°).
        
4. **ë°ì´í„° ì ‘ê·¼:**
    
    - `RedisRepository` í˜¹ì€ `RedisTemplate` ì„¤ì • ë° í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±.
        

---

ì‚¬ìˆ˜ì˜ í•œë§ˆë””:

"ì‹ ì…ë‹˜, ì´ì œ HashMapì„ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ëŒ€ì‹  **'ì´ë¯¸ êµ¬í˜„ëœ ê³ ì„±ëŠ¥ Map(Redis)'**ì„ í˜¸ì¶œí•˜ëŠ” ë²•ì„ ë°°ìš°ì…¨ë„¤ìš”. ì´ê²Œ ë°”ë¡œ ì½”ë”ì™€ ì—”ì§€ë‹ˆì–´ì˜ ì°¨ì´ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ ì €ë…ì— Redis ì„¤ì¹˜ë¶€í„° í•´ë³¼ê¹Œìš”?"


> [!NOTE]- ì½”ë“œ ìƒì„¸
> ## **Redis ë…¸ì‡¼ í™•ì¸ ë¡œì§ í•µì‹¬ ìš”ì•½**
>
> ### **1. í•µì‹¬ ì •ì˜**
>
> ì´ ì½”ë“œëŠ” Javaê°€ ì§ì ‘ ë°ì´í„°ë¥¼ ë’¤ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **"ID(ì£¼ì†Œ)ë¥¼ ì¤„ í…Œë‹ˆ, ì°½ê³ (Redis)ì— ì €ì¥ëœ ë°ì´í„°ë“¤ë¼ë¦¬ ì§ì ‘ ë¹„êµí•´ì„œ ê²°ê³¼ë§Œ ë‚˜ì—ê²Œ ë³´ë‚´ë¼"**ê³  ëª…ë ¹í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
>
> ### **2. Redisì˜ ê¸°ë³¸ ì›ë¦¬ (ê³ ì„±ëŠ¥ ì°½ê³ )**
>
> - **RAM ì €ì¥:** ë³´í†µì˜ ë°ì´í„°ë² ì´ìŠ¤(MySQL ë“±)ëŠ” í•˜ë“œë””ìŠ¤í¬ì— ì €ì¥í•˜ì§€ë§Œ, **RedisëŠ” ì»´í“¨í„°ì˜ ë©”ëª¨ë¦¬(RAM)ì— ì§ì ‘ ë°ì´í„°ë¥¼ ì €ì¥**í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì—„ì²­ë‚˜ê²Œ ë¹ ë¦…ë‹ˆë‹¤.
> - **Key-Value êµ¬ì¡°:**
>     - **Key (ì´ë¦„í‘œ):** ë°ì´í„°ë¥¼ ì°¾ê¸° ìœ„í•œ ê³ ìœ  ì£¼ì†Œ (ì˜ˆ: `event:101:registered`)
>     - **Value (ë‚´ìš©ë¬¼):** ê·¸ ì£¼ì†Œ ì•ˆì— ë“¤ì–´ìˆëŠ” ì‹¤ì œ ë°ì´í„° ë­‰ì¹˜
>         
> 
> ### **3. `eventId`ì˜ ì—­í• ê³¼ ë°ì´í„° êµ¬ì¡°**
>
> `eventId`ëŠ” ë°ì´í„° ìì²´ê°€ ì•„ë‹ˆë¼, **ë°ì´í„°ê°€ ì €ì¥ëœ ìœ„ì¹˜ë¥¼ ì°¾ì•„ê°€ê¸° ìœ„í•œ 'ì§€ë„ ìƒì˜ êµ¬ì—­ ë²ˆí˜¸'**ì…ë‹ˆë‹¤.
>
> - **KEY ìƒì„±:** `eventId`("101")ë¥¼ ì´ìš©í•´ ë‘ ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì£¼ì†Œ(Key)ë¥¼ ë§Œë“­ë‹ˆë‹¤.
> 	1. `event:101:registered` (ì‹ ì²­ì ëª…ë‹¨ ì£¼ì†Œ)
> 	2. `event:101:entered` (ì…ì¥ì ëª…ë‹¨ ì£¼ì†Œ)
> - **Value ì €ì¥ í˜•íƒœ (Set):** ê° ì£¼ì†Œì—ëŠ” ë°ì´í„°ë“¤ì„ ì €ì¥ë ë•Œ, ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” Redisì˜ **Set(ì§‘í•©)**ì´ë¼ëŠ” ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤
> 
> | **Key (ìƒì„±ëœ ì£¼ì†Œ)**           | **Value (Redis ë‚´ë¶€ì˜ ì£¼ë¨¸ë‹ˆ)**        |
> | -------------------------- | -------------------------------- |
> | **`event:101:registered`** | `{ "ì² ìˆ˜", "ì˜í¬", "ë¯¼ìˆ˜", â€¦ }` (ìˆ˜ì²œ ëª…) |
> | **`event:101:entered`**    | `{ "ì² ìˆ˜", "ë¯¼ìˆ˜" }` (ì‹¤ì œ ì˜¨ ì‚¬ëŒ)       |
>
> ### **4. ë¡œì§ì˜ ì‹¤í–‰ íë¦„**
>
> #### **Step 1: ë°ì´í„° ì‚¬ì „ ì ì¬ (ì„ í–‰ ì¡°ê±´)**
>
> ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ì „, ìœ ì €ê°€ ì˜ˆì•½/ì…ì¥í•  ë•Œë§ˆë‹¤ **`SADD`** ëª…ë ¹ì–´ë¡œ í•´ë‹¹ ì£¼ë¨¸ë‹ˆì— IDê°€ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì—¬ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
>
> > _ë¹„ìœ : ìš°ì²´í†µ(Key)ì— í¸ì§€(ID)ê°€ ë¯¸ë¦¬ ìˆ˜ì²œ í†µ ìŒ“ì—¬ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤._
>
> #### **Step 2: ì½”ë“œ ì‹¤í–‰ (Java â†’ Redis)**
>
> 1. **ì£¼ì†Œ ì¡°í•©:** ì…ë ¥ë°›ì€ `eventId`ë¡œ **ì˜ˆì•½ì ì£¼ì†Œ(A)**ì™€ **ì…ì¥ì ì£¼ì†Œ(B)**ë¥¼ ë§Œë“­ë‹ˆë‹¤.
> 2. **ëª…ë ¹ ì „ë‹¬:** Java ì„œë²„ëŠ” ìˆ˜ì²œ ëª…ì˜ ë°ì´í„°ë¥¼ ìê¸° ë©”ëª¨ë¦¬ë¡œ ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤. Redisì—ê²Œ **"A ì£¼ì†Œì™€ B ì£¼ì†Œì˜ ì°¨ì§‘í•©ì„ ê³„ì‚°í•´ë¼"**ë¼ëŠ” ëª…ë ¹ì–´ë§Œ ë³´ëƒ…ë‹ˆë‹¤.
> 
> #### **Step 3: ì—°ì‚° ë° ê²°ê³¼ (Redis â†’ Java)**
>
> - **Redis ì—”ì§„**ì´ ë©”ëª¨ë¦¬ ë‚´ë¶€ì—ì„œ ì¦‰ì‹œ ì°¨ì§‘í•©($A - B$)ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
> - Java ì„œë²„ë¡œëŠ” **ê³„ì‚°ëœ ê²°ê³¼(ë…¸ì‡¼ ëª…ë‹¨)**ë§Œ Java ì„œë²„ì˜ `Set<String>` í˜•íƒœë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
> 
> ### **5. ê¸°ìˆ ì  í•µì‹¬ ("ì™œ í•˜ë‚˜ë§Œ ì¤¬ëŠ”ë° ì „ì²´ê°€ ì²˜ë¦¬ë¼?")**
>
> 1. **í¬ì¸í„°(Pointer) ê°œë…:** Javaê°€ ë“¤ê³  ìˆëŠ” ë³€ìˆ˜(`allUsersKey`)ëŠ” ì‹¤ì œ ë°ì´í„° ë©ì–´ë¦¬ê°€ ì•„ë‹ˆë¼, Redisë¼ëŠ” ì™¸ë¶€ ì €ì¥ì†Œì— ìˆëŠ” **ë°ì´í„° ë­‰ì¹˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” 'í¬ì¸í„°(ì§€ì •ì)'** ì—­í• ì„ í•©ë‹ˆë‹¤.
> 2. **ì„œë²„ ì‚¬ì´ë“œ ì—°ì‚°:** ë¹„êµ ì‘ì—…ì˜ ì£¼ì²´ëŠ” Javaê°€ ì•„ë‹ˆë¼ **Redis**ì…ë‹ˆë‹¤. ë”°ë¼ì„œ JavaëŠ” ì£¼ì†Œë§Œ ë˜ì ¸ì£¼ë©´ ë©ë‹ˆë‹¤.



---

### 1. ì‚¬ì „ ì„¤ì • (Configuration)

`StringRedisTemplate`ì„ ì‚¬ìš©í•˜ì—¬ Keyì™€ Value(UserId)ë¥¼ ëª¨ë‘ ë¬¸ìì—´ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```Java
package com.example.event.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.StringRedisTemplate;

@Configuration
public class RedisConfig {

    @Bean
    public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) {
        return new StringRedisTemplate(redisConnectionFactory);
    }
}
```

---

### 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ & ë°ì´í„° ì ‘ê·¼ (Service + Repository)

**í•µì‹¬:** `HashMap`ì„ ê±·ì–´ë‚´ê³  `opsForSet()`ì„ ì‚¬ìš©í•˜ì—¬ Redisì—ê²Œ ì—°ì‚°ì„ ìœ„ì„í–ˆìŠµë‹ˆë‹¤.

```Java
package com.example.event.service;

import lombok.RequiredArgsConstructor;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.stereotype.Service;

import java.util.Set;

@Service
@RequiredArgsConstructor
public class EventRedisService {

    private final StringRedisTemplate redisTemplate;

    // 1. Redis Key ìƒì„± ì „ëµ (ì„¤ê³„ ë°˜ì˜)
    private String getRegisteredKey(String eventId) {
        return "event:" + eventId + ":registered";
    }

    private String getEnteredKey(String eventId) {
        return "event:" + eventId + ":entered";
    }

    /**
     * [ì‚¬ì „ ì‘ì—…] ì°¸ê°€ ì‹ ì²­ (í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í•„ìš”)
     * Redis Command: SADD event:{id}:registered {userId}
     */
    public void registerUser(String eventId, String userId) {
        redisTemplate.opsForSet().add(getRegisteredKey(eventId), userId);
    }

    /**
     * [ìš”êµ¬ì‚¬í•­ 3-1] ì…ì¥ ì²˜ë¦¬ êµ¬í˜„
     * Redis Command: SADD event:{id}:entered {userId}
     * - ë™ëª…ì´ì¸ ë¬¸ì œ í•´ê²°: userId(ê³ ìœ ê°’)ë¥¼ ì €ì¥í•˜ë¯€ë¡œ ì¤‘ë³µ ê±±ì • ì—†ìŒ.
     * - Set íŠ¹ì„±: ì´ë¯¸ ì…ì¥í•œ ìœ ì €ê°€ ë‹¤ì‹œ ì°ì–´ë„ ë¬¸ì œ ì—†ìŒ.
     */
    public void enterUser(String eventId, String userId) {
        redisTemplate.opsForSet().add(getEnteredKey(eventId), userId);
    }

    /**
     * [ìš”êµ¬ì‚¬í•­ 3-2] ë¯¸ì…ì¥ì(ë…¸ì‡¼) ì¡°íšŒ ë¡œì§ êµ¬í˜„
     * Redis Command: SDIFF event:{id}:registered event:{id}:entered
     * - ê¸°ì¡´ Java HashMap ë¡œì§ì„ ì´ í•œ ì¤„ë¡œ ëŒ€ì²´.
     * - Redis ë©”ëª¨ë¦¬ ë‚´ë¶€ì—ì„œ ì°¨ì§‘í•© ê³„ì‚° í›„ ê²°ê³¼ë§Œ ë°˜í™˜.
     */
    public Set<String> getNoShowUsers(String eventId) {
        String registeredKey = getRegisteredKey(eventId);
        String enteredKey = getEnteredKey(eventId);

        // í•µì‹¬ ë¡œì§: ë“±ë¡ì(A) - ì…ì¥ì(B) = ë¯¸ì…ì¥ì
        return redisTemplate.opsForSet().difference(registeredKey, enteredKey);
    }
}
```

---

### 3. API ì»¨íŠ¸ë¡¤ëŸ¬ (Controller)

`UserId`ë¥¼ ë°›ëŠ” ê°„ë‹¨í•œ DTOì™€ í•¨ê»˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.



```Java
package com.example.event.controller;

import com.example.event.service.EventRedisService;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.Set;

@RestController
@RequestMapping("/api/events")
@RequiredArgsConstructor
public class EventController {

    private final EventRedisService eventService;

    // DTO: ì…ì¥ ìš”ì²­ìš©
    record EnterRequest(String userId) {}

    // [ìš”êµ¬ì‚¬í•­ 2-1] ì…ì¥ ì²˜ë¦¬ API
    // POST /api/events/{id}/enter
    @PostMapping("/{eventId}/enter")
    public ResponseEntity<String> enterEvent(@PathVariable String eventId, @RequestBody EnterRequest request) {
        eventService.enterUser(eventId, request.userId());
        return ResponseEntity.ok("ì…ì¥ ì²˜ë¦¬ ì™„ë£Œ: " + request.userId());
    }

    // [ìš”êµ¬ì‚¬í•­ 2-2] ë¯¸ì…ì¥ì ì¡°íšŒ API
    // GET /api/events/{id}/no-show
    @GetMapping("/{eventId}/no-show")
    public ResponseEntity<Set<String>> getNoShowUsers(@PathVariable String eventId) {
        Set<String> noShowUsers = eventService.getNoShowUsers(eventId);
        return ResponseEntity.ok(noShowUsers);
    }
    
    // (í…ŒìŠ¤íŠ¸ìš©) ì°¸ê°€ ì‹ ì²­ API
    @PostMapping("/{eventId}/register")
    public ResponseEntity<String> registerEvent(@PathVariable String eventId, @RequestBody EnterRequest request) {
        eventService.registerUser(eventId, request.userId());
        return ResponseEntity.ok("ì‹ ì²­ ì™„ë£Œ");
    }
}
```

---

### 4. í…ŒìŠ¤íŠ¸ ì½”ë“œ (Test)

ì‹¤ì œ ë¡œì§ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì…ë‹ˆë‹¤. (JUnit 5 + Mockito í™œìš©)


```Java
package com.example.event.service;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.data.redis.core.SetOperations;
import org.springframework.data.redis.core.StringRedisTemplate;

import java.util.Set;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.ArgumentMatchers.anyString;
import static org.mockito.BDDMockito.given;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

@ExtendWith(MockitoExtension.class)
class EventRedisServiceTest {

    @InjectMocks
    private EventRedisService eventService;

    @Mock
    private StringRedisTemplate redisTemplate;

    @Mock
    private SetOperations<String, String> setOperations;

    @Test
    @DisplayName("Redis SDIFFë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ì‡¼ ìœ ì €ë¥¼ ì •í™•íˆ ë°˜í™˜í•œë‹¤")
    void getNoShowUsersTest() {
        // given
        String eventId = "concert_2025";
        String registeredKey = "event:concert_2025:registered";
        String enteredKey = "event:concert_2025:entered";

        // RedisTemplateì´ Mock SetOperationsë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •
        when(redisTemplate.opsForSet()).thenReturn(setOperations);

        // SDIFF í˜¸ì¶œ ì‹œ ë°˜í™˜ë  ê°€ì§œ ë°ì´í„° ì„¤ì • (ì² ìˆ˜, ì˜í¬ê°€ ë…¸ì‡¼)
        Set<String> expectedNoShows = Set.of("user_cheolsu", "user_younghee");
        given(setOperations.difference(registeredKey, enteredKey)).willReturn(expectedNoShows);

        // when
        Set<String> actualNoShows = eventService.getNoShowUsers(eventId);

        // then
        assertEquals(2, actualNoShows.size());
        verify(setOperations).difference(registeredKey, enteredKey); // SDIFFê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦
    }
    
    @Test
    @DisplayName("ì…ì¥ ì²˜ë¦¬ëŠ” SADDë¥¼ í˜¸ì¶œí•œë‹¤")
    void enterUserTest() {
        // given
        String eventId = "concert_2025";
        String userId = "user_minsoo";
        when(redisTemplate.opsForSet()).thenReturn(setOperations);
        
        // when
        eventService.enterUser(eventId, userId);
        
        // then
        verify(setOperations).add("event:concert_2025:entered", userId);
    }
}
```

### âœ… êµ¬í˜„ ì™„ë£Œ í¬ì¸íŠ¸

1. **Policy B ë°˜ì˜:** Java ë©”ëª¨ë¦¬ì—ì„œ ê³„ì‚°í•˜ì§€ ì•Šê³  Redis `SDIFF`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
2. **Key ì„¤ê³„:** `event:{id}:registered` / `entered` êµ¬ì¡°ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.
3. **ì½”ë“œ ê°„ì†Œí™”:** ë³µì¡í•œ `if`ë¬¸ì´ë‚˜ ë°˜ë³µë¬¸ ì—†ì´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ 1~2ì¤„ë¡œ ëë‚©ë‹ˆë‹¤.
    
